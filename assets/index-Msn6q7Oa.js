var e=Object.defineProperty,t=(t,i,n)=>(((t,i,n)=>{i in t?e(t,i,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[i]=n})(t,"symbol"!=typeof i?i+"":i,n),n);import{p as i,g as n}from"./phaser-D3Vw4X5i.js";!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))t(e);new MutationObserver((e=>{for(const i of e)if("childList"===i.type)for(const e of i.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&t(e)})).observe(document,{childList:!0,subtree:!0})}function t(e){if(e.ep)return;e.ep=!0;const t=function(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerPolicy&&(t.referrerPolicy=e.referrerPolicy),"use-credentials"===e.crossOrigin?t.credentials="include":"anonymous"===e.crossOrigin?t.credentials="omit":t.credentials="same-origin",t}(e);fetch(e.href,t)}}();const s=64,o=100,a=51,r=64,h=52;var l=(e=>(e.left="left",e.right="right",e.up="up",e.down="down",e))(l||{});const c={left:{x:-1,y:0},right:{x:1,y:0},up:{x:0,y:-1},down:{x:0,y:1}},f=[[[o,o,o,o,o],[o,a,8,0,o],[o,0,8,0,o],[o,r,9,h,o],[o,o,a,o,o],[o,o,o,o,o]],[[o,o,o,o,o,o,o],[o,o,a,o,h,r,o],[o,0,0,0,8,0,o],[o,9,9,o,0,0,o],[o,r,0,0,0,0,o],[o,o,o,o,o,o,o]],[[o,o,o,o,o,o,o,o],[o,o,o,o,o,0,0,o],[o,0,0,h,8,8,0,o],[o,0,7,0,o,0,0,o],[o,0,9,a,o,0,0,o],[o,0,0,0,0,a,0,o],[o,0,0,o,38,0,r,o],[o,o,o,o,o,o,o,o]],[[o,o,o,o,o,o,o],[o,o,a,0,o,o,o],[o,o,0,0,8,0,o],[o,h,0,7,0,0,o],[o,r,8,0,0,38,o],[o,o,9,0,0,o,o],[o,o,0,a,o,o,o],[o,o,o,o,o,o,o]],[[o,o,o,o,o,o,o,o],[o,38,0,o,0,0,0,o],[o,0,8,0,0,o,0,o],[o,0,7,o,0,0,0,o],[o,38,a,h,0,8,0,o],[o,o,o,0,7,o,o,o],[o,o,o,0,a,o,o,o],[o,o,o,o,o,o,o,o]]],u=new Phaser.Events.EventEmitter;class m{constructor(e){t(this,"gameScene"),t(this,"isMoving",!1),t(this,"isTouching",!1),t(this,"movementDirection"),e&&(this.gameScene=e,u.on("touchArrow",(e=>{this.movementDirection=e,this.isTouching=!0})),u.on("stopMovement",(()=>this.isTouching=!1)))}getBoxAt(e,t){if(this.gameScene&&this.gameScene.boxes)return this.gameScene.boxes.find((i=>i.getBounds().contains(e,t)))}handlePlayerKeyInput(){this.gameScene&&!this.isMoving&&this.gameScene.player&&this.gameScene.cursors&&(this.gameScene.cursors.left.isDown?this.movementDirection=l.left:this.gameScene.cursors.right.isDown?this.movementDirection=l.right:this.gameScene.cursors.up.isDown?this.movementDirection=l.up:this.gameScene.cursors.down.isDown&&(this.movementDirection=l.down),this.movementDirection&&this.processPlayerMovement())}handlePlayerTouchMovement(e){if(this.isMoving)return;if(!e)return;this.isTouching=!0;const{worldX:t,worldY:i}=e;this.movementDirection=this.getTouchDirection(t,i),this.movementDirection&&this.processPlayerMovement()}getTouchDirection(e,t){if(!this.gameScene||!this.gameScene.player)return;const i=this.gameScene.player.getBounds();return i.centerX>e&&i.y<=t&&i.y+s>=t?l.left:i.centerX<e&&i.y<=t&&i.y+s>=t?l.right:i.centerY>t&&i.x<=e&&i.x+s>=e?l.up:i.centerY<t&&i.x<=e&&i.x+s>=e?l.down:void 0}stopTouching(){this.isTouching=!1,this.movementDirection=void 0}stopPlayerMovement(){var e;if(!this.gameScene||!this.gameScene.player)return;this.isMoving=!1,this.isTouching||(this.movementDirection=void 0);const t=null==(e=this.gameScene.player.anims.currentAnim)?void 0:e.key,i=null==t?void 0:t.split("-")[0];!this.isMoving&&i&&this.gameScene.player.play(`${i}-idle`)}processPlayerMovement(){if(!this.gameScene||!this.gameScene.player||!this.movementDirection)return;const e=c[this.movementDirection],t=this.getBoxAt(this.gameScene.player.x+32*e.x,this.gameScene.player.y+32*e.y);this.checkMovementPossibilities(this.gameScene.player,e,!!t)&&(this.isMoving=!0,t&&this.moveObject(t,e,void 0,this.checkBoxInPlaceAndWinCondition(this.gameScene,t)),this.moveObject(this.gameScene.player,e,[`${this.movementDirection}-walk`,!0],this.stopPlayerMovement.bind(this))),this.isTouching||(this.movementDirection=void 0)}checkMovementPossibilities(e,t,i){var n;if(!this.gameScene)return!1;const{x:a,y:r}=e.getCenter(),h=i?128:s,l=a+h*t.x,c=r+h*t.y,f=null==(n=this.gameScene.playbleLayer)?void 0:n.getTileAtWorldXY(l,c),u=this.getBoxAt(l,c);return!(f&&f.index===o||u)}moveObject(e,t,i,n){this.gameScene&&this.gameScene.tweens.add({targets:e,x:e.x+t.x*s,y:e.y+t.y*s,duration:500,onStart:()=>i?e.play(...i):null,onComplete:n})}checkBoxInPlaceAndWinCondition(e,t){return()=>{var i;const{x:n,y:s}=t.getCenter(),o=null==(i=e.playbleLayer)?void 0:i.getTileAtWorldXY(n,s);if(!o||!e.boxes)return;const a=t.getData("dot")===o.index;t.setData("matched",a),a?t.postFX.addGlow(16777215,0,1.5,!1,.05,15):t.clearFX(),e.boxes.reduce(((e,t)=>t.getData("matched")?++e:e),0)===e.boxes.length&&(this.isMoving=!1,this.movementDirection=void 0,f.length===e.levelNumber+1?u.emit("final-win",this.gameScene,!0):u.emit("show-win",this.gameScene))}}}class d extends i.Scene{constructor(){super("Game"),t(this,"level"),t(this,"floorLayer",null),t(this,"backgroundLayer",null),t(this,"gameMapMargin",{x:0,y:0}),t(this,"map"),t(this,"processMovements"),t(this,"playbleLayer",null),t(this,"cursors"),t(this,"player"),t(this,"levelNumber",0),t(this,"boxes"),u.on("restartLevel",(()=>this.scene.restart()))}init(){var e;this.cursors=null==(e=this.input.keyboard)?void 0:e.createCursorKeys()}create(e){var t;this.input.addPointer(1),this.processMovements=new m(this),this.levelNumber=e[0],this.createMap(),this.createPlayer(),this.createBoxes(),null==(t=this.input.keyboard)||t.on("keydown-SPACE",(()=>this.scale.isFullscreen?this.scale.stopFullscreen():this.scale.startFullscreen())),this.scene.run("UIScene",[this.levelNumber+1])}update(){this.processMovements&&this.processMovements.handlePlayerKeyInput()}createMap(){var e,t;if(this.level=f[this.levelNumber],!this.level)return;const{width:i,height:n}=this.scale;this.map=this.make.tilemap({data:this.level,tileWidth:s,tileHeight:s,key:"level"}),[this.gameMapMargin.x,this.gameMapMargin.y]=[.5*(i-this.level[0].length*s),.5*(n-this.level.length*s)];const o=this.map.addTilesetImage("tiles");this.backgroundLayer=this.map.createBlankLayer("background",o||"noTiles",0-this.gameMapMargin.x,0-this.gameMapMargin.y,i,n),null==(e=this.backgroundLayer)||e.fill(101,0,0,i,n),this.floorLayer=this.map.createBlankLayer("floor",o||"noTiles",this.gameMapMargin.x,this.gameMapMargin.y),null==(t=this.floorLayer)||t.fill(90,0,0,this.map.width,this.map.height),this.playbleLayer=this.map.createLayer("layer",o||"noTiles",this.gameMapMargin.x,this.gameMapMargin.y)}createPlayer(){if(this.playbleLayer){const e=this.playbleLayer.createFromTiles(h,0,{key:"tiles",frame:h});if(e.length>1)return void console.error("More than 1 player on the level!");e[0].setOrigin(.5).play("down-idle"),e[0].setData("player",!0),[this.player]=e}this.processMovements&&this.input.on("pointerdown",this.processMovements.handlePlayerTouchMovement.bind(this.processMovements)).on("pointerup",this.processMovements.stopTouching.bind(this.processMovements))}createBoxes(){this.boxes=[],this.createBoxDotPair(8,a),this.createBoxDotPair(9,r),this.createBoxDotPair(7,38)}createBoxDotPair(e,t){if(!this.playbleLayer||!this.boxes)return;const i=this.playbleLayer.createFromTiles(e,0,{key:"tiles",frame:e});i&&0!==i.length&&(i.forEach((e=>{e.setOrigin(.5),e.setData("dot",t)})),this.boxes=this.boxes.concat(i))}}class g extends i.Scene{constructor(){super("Preloader")}init(){const{width:e,height:t}=this.scale,i=this.add.rectangle(e/2,t/2,4,28,16777215).setOrigin(.5);this.load.on("progress",(t=>{i.width=4+e/2*t,i.setOrigin(.5)}))}preload(){this.load.setPath("assets"),this.load.spritesheet("tiles","textures/sokoban_tilesheet.png",{frameWidth:s,startFrame:0}),this.load.image("arrowButton","images/arrowButton.png"),this.load.image("refreshButton","images/refreshButton.png")}create(){this.createAnims(),this.startGame()}startGame(){this.scene.start("Game",[0])}createAnims(){this.anims.create({key:"down-idle",frames:[{key:"tiles",frame:52}]}),this.anims.create({key:"up-idle",frames:[{key:"tiles",frame:55}]}),this.anims.create({key:"left-idle",frames:[{key:"tiles",frame:81}]}),this.anims.create({key:"right-idle",frames:[{key:"tiles",frame:78}]}),this.anims.create({key:"down-walk",frames:this.anims.generateFrameNumbers("tiles",{start:52,end:54}),frameRate:10,repeat:-1}),this.anims.create({key:"up-walk",frames:this.anims.generateFrameNumbers("tiles",{start:55,end:57}),frameRate:10,repeat:-1}),this.anims.create({key:"left-walk",frames:this.anims.generateFrameNumbers("tiles",{start:81,end:83}),frameRate:10,repeat:-1}),this.anims.create({key:"right-walk",frames:this.anims.generateFrameNumbers("tiles",{start:78,end:80}),frameRate:10,repeat:-1})}}var p,v={exports:{}};p=v,function(){function e(e,t,i){return e.call.apply(e.bind,arguments)}function t(e,t,i){if(!e)throw Error();if(2<arguments.length){var n=Array.prototype.slice.call(arguments,2);return function(){var i=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(i,n),e.apply(t,i)}}return function(){return e.apply(t,arguments)}}function i(n,s,o){return(i=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?e:t).apply(null,arguments)}var n=Date.now||function(){return+new Date};function s(e,t){this.a=e,this.o=t||e,this.c=this.o.document}var o=!!window.FontFace;function a(e,t,i,n){if(t=e.c.createElement(t),i)for(var s in i)i.hasOwnProperty(s)&&("style"==s?t.style.cssText=i[s]:t.setAttribute(s,i[s]));return n&&t.appendChild(e.c.createTextNode(n)),t}function r(e,t,i){(e=e.c.getElementsByTagName(t)[0])||(e=document.documentElement),e.insertBefore(i,e.lastChild)}function h(e){e.parentNode&&e.parentNode.removeChild(e)}function l(e,t,i){t=t||[],i=i||[];for(var n=e.className.split(/\s+/),s=0;s<t.length;s+=1){for(var o=!1,a=0;a<n.length;a+=1)if(t[s]===n[a]){o=!0;break}o||n.push(t[s])}for(t=[],s=0;s<n.length;s+=1){for(o=!1,a=0;a<i.length;a+=1)if(n[s]===i[a]){o=!0;break}o||t.push(n[s])}e.className=t.join(" ").replace(/\s+/g," ").replace(/^\s+|\s+$/,"")}function c(e,t){for(var i=e.className.split(/\s+/),n=0,s=i.length;n<s;n++)if(i[n]==t)return!0;return!1}function f(e,t,i){function n(){c&&s&&h&&(c(l),c=null)}t=a(e,"link",{rel:"stylesheet",href:t,media:"all"});var s=!1,h=!0,l=null,c=i||null;o?(t.onload=function(){s=!0,n()},t.onerror=function(){s=!0,l=Error("Stylesheet failed to load"),n()}):setTimeout((function(){s=!0,n()}),0),r(e,"head",t)}function u(e,t,i,n){var s=e.c.getElementsByTagName("head")[0];if(s){var o=a(e,"script",{src:t}),r=!1;return o.onload=o.onreadystatechange=function(){r||this.readyState&&"loaded"!=this.readyState&&"complete"!=this.readyState||(r=!0,i&&i(null),o.onload=o.onreadystatechange=null,"HEAD"==o.parentNode.tagName&&s.removeChild(o))},s.appendChild(o),setTimeout((function(){r||(r=!0,i&&i(Error("Script load timeout")))}),n||5e3),o}return null}function m(){this.a=0,this.c=null}function d(e){return e.a++,function(){e.a--,v(e)}}function g(e,t){e.c=t,v(e)}function v(e){0==e.a&&e.c&&(e.c(),e.c=null)}function y(e){this.a=e||"-"}function w(e,t){this.c=e,this.f=4,this.a="n";var i=(t||"n4").match(/^([nio])([1-9])$/i);i&&(this.a=i[1],this.f=parseInt(i[2],10))}function b(e){var t=[];e=e.split(/,\s*/);for(var i=0;i<e.length;i++){var n=e[i].replace(/['"]/g,"");-1!=n.indexOf(" ")||/^\d/.test(n)?t.push("'"+n+"'"):t.push(n)}return t.join(",")}function x(e){return e.a+e.f}function k(e){var t="normal";return"o"===e.a?t="oblique":"i"===e.a&&(t="italic"),t}function S(e){var t=4,i="n",n=null;return e&&((n=e.match(/(normal|oblique|italic)/i))&&n[1]&&(i=n[1].substr(0,1).toLowerCase()),(n=e.match(/([1-9]00|normal|bold)/i))&&n[1]&&(/bold/i.test(n[1])?t=7:/[1-9]00/.test(n[1])&&(t=parseInt(n[1].substr(0,1),10)))),i+t}function M(e,t){this.c=e,this.f=e.o.document.documentElement,this.h=t,this.a=new y("-"),this.j=!1!==t.events,this.g=!1!==t.classes}function P(e){if(e.g){var t=c(e.f,e.a.c("wf","active")),i=[],n=[e.a.c("wf","loading")];t||i.push(e.a.c("wf","inactive")),l(e.f,i,n)}T(e,"inactive")}function T(e,t,i){e.j&&e.h[t]&&(i?e.h[t](i.c,x(i)):e.h[t]())}function L(){this.c={}}function C(e,t){this.c=e,this.f=t,this.a=a(this.c,"span",{"aria-hidden":"true"},this.f)}function j(e){r(e.c,"body",e.a)}function N(e){return"display:block;position:absolute;top:-9999px;left:-9999px;font-size:300px;width:auto;height:auto;line-height:normal;margin:0;padding:0;font-variant:normal;white-space:nowrap;font-family:"+b(e.c)+";font-style:"+k(e)+";font-weight:"+e.f+"00;"}function D(e,t,i,n,s,o){this.g=e,this.j=t,this.a=n,this.c=i,this.f=s||3e3,this.h=o||void 0}function F(e,t,i,n,s,o,a){this.v=e,this.B=t,this.c=i,this.a=n,this.s=a||"BESbswy",this.f={},this.w=s||3e3,this.u=o||null,this.m=this.j=this.h=this.g=null,this.g=new C(this.c,this.s),this.h=new C(this.c,this.s),this.j=new C(this.c,this.s),this.m=new C(this.c,this.s),e=N(e=new w(this.a.c+",serif",x(this.a))),this.g.a.style.cssText=e,e=N(e=new w(this.a.c+",sans-serif",x(this.a))),this.h.a.style.cssText=e,e=N(e=new w("serif",x(this.a))),this.j.a.style.cssText=e,e=N(e=new w("sans-serif",x(this.a))),this.m.a.style.cssText=e,j(this.g),j(this.h),j(this.j),j(this.m)}y.prototype.c=function(e){for(var t=[],i=0;i<arguments.length;i++)t.push(arguments[i].replace(/[\W_]+/g,"").toLowerCase());return t.join(this.a)},D.prototype.start=function(){var e=this.c.o.document,t=this,i=n(),s=new Promise((function(s,o){!function a(){n()-i>=t.f?o():e.fonts.load(function(e){return k(e)+" "+e.f+"00 300px "+b(e.c)}(t.a),t.h).then((function(e){1<=e.length?s():setTimeout(a,25)}),(function(){o()}))}()})),o=null,a=new Promise((function(e,i){o=setTimeout(i,t.f)}));Promise.race([a,s]).then((function(){o&&(clearTimeout(o),o=null),t.g(t.a)}),(function(){t.j(t.a)}))};var A={D:"serif",C:"sans-serif"},B=null;function _(){if(null===B){var e=/AppleWebKit\/([0-9]+)(?:\.([0-9]+))/.exec(window.navigator.userAgent);B=!!e&&(536>parseInt(e[1],10)||536===parseInt(e[1],10)&&11>=parseInt(e[2],10))}return B}function W(e,t,i){for(var n in A)if(A.hasOwnProperty(n)&&t===e.f[A[n]]&&i===e.f[A[n]])return!0;return!1}function O(e){var t,s=e.g.a.offsetWidth,o=e.h.a.offsetWidth;(t=s===e.f.serif&&o===e.f["sans-serif"])||(t=_()&&W(e,s,o)),t?n()-e.A>=e.w?_()&&W(e,s,o)&&(null===e.u||e.u.hasOwnProperty(e.a.c))?E(e,e.v):E(e,e.B):function(e){setTimeout(i((function(){O(this)}),e),50)}(e):E(e,e.v)}function E(e,t){setTimeout(i((function(){h(this.g.a),h(this.h.a),h(this.j.a),h(this.m.a),t(this.a)}),e),0)}function I(e,t,i){this.c=e,this.a=t,this.f=0,this.m=this.j=!1,this.s=i}F.prototype.start=function(){this.f.serif=this.j.a.offsetWidth,this.f["sans-serif"]=this.m.a.offsetWidth,this.A=n(),O(this)};var G=null;function R(e){0==--e.f&&e.j&&(e.m?((e=e.a).g&&l(e.f,[e.a.c("wf","active")],[e.a.c("wf","loading"),e.a.c("wf","inactive")]),T(e,"active")):P(e.a))}function X(e){this.j=e,this.a=new L,this.h=0,this.f=this.g=!0}function Y(e,t,n,s,o){var a=0==--e.h;(e.f||e.g)&&setTimeout((function(){var e=o||null,r=s||{};if(0===n.length&&a)P(t.a);else{t.f+=n.length,a&&(t.j=a);var h,c=[];for(h=0;h<n.length;h++){var f=n[h],u=r[f.c],m=t.a,d=f;if(m.g&&l(m.f,[m.a.c("wf",d.c,x(d).toString(),"loading")]),T(m,"fontloading",d),m=null,null===G)if(window.FontFace){d=/Gecko.*Firefox\/(\d+)/.exec(window.navigator.userAgent);var g=/OS X.*Version\/10\..*Safari/.exec(window.navigator.userAgent)&&/Apple/.exec(window.navigator.vendor);G=d?42<parseInt(d[1],10):!g}else G=!1;m=G?new D(i(t.g,t),i(t.h,t),t.c,f,t.s,u):new F(i(t.g,t),i(t.h,t),t.c,f,t.s,e,u),c.push(m)}for(h=0;h<c.length;h++)c[h].start()}}),0)}function $(e,t){this.c=e,this.a=t}function U(e,t){this.c=e,this.a=t}function z(e,t){this.c=e||K,this.a=[],this.f=[],this.g=t||""}I.prototype.g=function(e){var t=this.a;t.g&&l(t.f,[t.a.c("wf",e.c,x(e).toString(),"active")],[t.a.c("wf",e.c,x(e).toString(),"loading"),t.a.c("wf",e.c,x(e).toString(),"inactive")]),T(t,"fontactive",e),this.m=!0,R(this)},I.prototype.h=function(e){var t=this.a;if(t.g){var i=c(t.f,t.a.c("wf",e.c,x(e).toString(),"active")),n=[],s=[t.a.c("wf",e.c,x(e).toString(),"loading")];i||n.push(t.a.c("wf",e.c,x(e).toString(),"inactive")),l(t.f,n,s)}T(t,"fontinactive",e),R(this)},X.prototype.load=function(e){this.c=new s(this.j,e.context||this.j),this.g=!1!==e.events,this.f=!1!==e.classes,function(e,t,i){var n=[],s=i.timeout;!function(e){e.g&&l(e.f,[e.a.c("wf","loading")]),T(e,"loading")}(t),n=function(e,t,i){var n,s=[];for(n in t)if(t.hasOwnProperty(n)){var o=e.c[n];o&&s.push(o(t[n],i))}return s}(e.a,i,e.c);var o=new I(e.c,t,s);for(e.h=n.length,t=0,i=n.length;t<i;t++)n[t].load((function(t,i,n){Y(e,o,t,i,n)}))}(this,new M(this.c,e),e)},$.prototype.load=function(e){function t(){if(o["__mti_fntLst"+n]){var i,s=o["__mti_fntLst"+n](),a=[];if(s)for(var r=0;r<s.length;r++){var h=s[r].fontfamily;null!=s[r].fontStyle&&null!=s[r].fontWeight?(i=s[r].fontStyle+s[r].fontWeight,a.push(new w(h,i))):a.push(new w(h))}e(a)}else setTimeout((function(){t()}),50)}var i=this,n=i.a.projectId,s=i.a.version;if(n){var o=i.c.o;u(this.c,(i.a.api||"https://fast.fonts.net/jsapi")+"/"+n+".js"+(s?"?v="+s:""),(function(s){s?e([]):(o["__MonotypeConfiguration__"+n]=function(){return i.a},t())})).id="__MonotypeAPIScript__"+n}else e([])},U.prototype.load=function(e){var t,i,n=this.a.urls||[],s=this.a.families||[],o=this.a.testStrings||{},a=new m;for(t=0,i=n.length;t<i;t++)f(this.c,n[t],d(a));var r=[];for(t=0,i=s.length;t<i;t++)if((n=s[t].split(":"))[1])for(var h=n[1].split(","),l=0;l<h.length;l+=1)r.push(new w(n[0],h[l]));else r.push(new w(n[0]));g(a,(function(){e(r,o)}))};var K="https://fonts.googleapis.com/css";function H(e){this.f=e,this.a=[],this.c={}}var q={latin:"BESbswy","latin-ext":"çöüğş",cyrillic:"йяЖ",greek:"αβΣ",khmer:"កខគ",Hanuman:"កខគ"},V={thin:"1",extralight:"2","extra-light":"2",ultralight:"2","ultra-light":"2",light:"3",regular:"4",book:"4",medium:"5","semi-bold":"6",semibold:"6","demi-bold":"6",demibold:"6",bold:"7","extra-bold":"8",extrabold:"8","ultra-bold":"8",ultrabold:"8",black:"9",heavy:"9",l:"3",r:"4",b:"7"},J={i:"i",italic:"i",n:"n",normal:"n"},Q=/^(thin|(?:(?:extra|ultra)-?)?light|regular|book|medium|(?:(?:semi|demi|extra|ultra)-?)?bold|black|heavy|l|r|b|[1-9]00)?(n|i|normal|italic)?$/;function Z(e,t){this.c=e,this.a=t}var ee={Arimo:!0,Cousine:!0,Tinos:!0};function te(e,t){this.c=e,this.a=t}function ie(e,t){this.c=e,this.f=t,this.a=[]}Z.prototype.load=function(e){var t=new m,i=this.c,n=new z(this.a.api,this.a.text),s=this.a.families;!function(e,t){for(var i=t.length,n=0;n<i;n++){var s=t[n].split(":");3==s.length&&e.f.push(s.pop());var o="";2==s.length&&""!=s[1]&&(o=":"),e.a.push(s.join(o))}}(n,s);var o=new H(s);!function(e){for(var t=e.f.length,i=0;i<t;i++){var n=e.f[i].split(":"),s=n[0].replace(/\+/g," "),o=["n4"];if(2<=n.length){var a;if(a=[],r=n[1])for(var r,h=(r=r.split(",")).length,l=0;l<h;l++){var c;if((c=r[l]).match(/^[\w-]+$/))if(null==(f=Q.exec(c.toLowerCase())))c="";else{if(c=null==(c=f[2])||""==c?"n":J[c],null==(f=f[1])||""==f)f="4";else var f=V[f]||(isNaN(f)?"4":f.substr(0,1));c=[c,f].join("")}else c="";c&&a.push(c)}0<a.length&&(o=a),3==n.length&&(a=[],0<(n=(n=n[2])?n.split(","):a).length&&(n=q[n[0]])&&(e.c[s]=n))}for(e.c[s]||(n=q[s])&&(e.c[s]=n),n=0;n<o.length;n+=1)e.a.push(new w(s,o[n]))}}(o),f(i,function(e){if(0==e.a.length)throw Error("No fonts to load!");if(-1!=e.c.indexOf("kit="))return e.c;for(var t=e.a.length,i=[],n=0;n<t;n++)i.push(e.a[n].replace(/ /g,"+"));return t=e.c+"?family="+i.join("%7C"),0<e.f.length&&(t+="&subset="+e.f.join(",")),0<e.g.length&&(t+="&text="+encodeURIComponent(e.g)),t}(n),d(t)),g(t,(function(){e(o.a,o.c,ee)}))},te.prototype.load=function(e){var t=this.a.id,i=this.c.o;t?u(this.c,(this.a.api||"https://use.typekit.net")+"/"+t+".js",(function(t){if(t)e([]);else if(i.Typekit&&i.Typekit.config&&i.Typekit.config.fn){t=i.Typekit.config.fn;for(var n=[],s=0;s<t.length;s+=2)for(var o=t[s],a=t[s+1],r=0;r<a.length;r++)n.push(new w(o,a[r]));try{i.Typekit.load({events:!1,classes:!1,async:!0})}catch(h){}e(n)}}),2e3):e([])},ie.prototype.load=function(e){var t=this.f.id,i=this.c.o,n=this;t?(i.__webfontfontdeckmodule__||(i.__webfontfontdeckmodule__={}),i.__webfontfontdeckmodule__[t]=function(t,i){for(var s=0,o=i.fonts.length;s<o;++s){var a=i.fonts[s];n.a.push(new w(a.name,S("font-weight:"+a.weight+";font-style:"+a.style)))}e(n.a)},u(this.c,(this.f.api||"https://f.fontdeck.com/s/css/js/")+function(e){return e.o.location.hostname||e.a.location.hostname}(this.c)+"/"+t+".js",(function(t){t&&e([])}))):e([])};var ne=new X(window);ne.a.c.custom=function(e,t){return new U(t,e)},ne.a.c.fontdeck=function(e,t){return new ie(t,e)},ne.a.c.monotype=function(e,t){return new $(t,e)},ne.a.c.typekit=function(e,t){return new te(t,e)},ne.a.c.google=function(e,t){return new Z(t,e)};var se={load:i(ne.load,ne)};p.exports?p.exports=se:(window.WebFont=se,window.WebFontConfig&&ne.load(window.WebFontConfig))}();const y=n(v.exports);class w extends Phaser.Loader.File{constructor(e,i,n="google"){super(e,{type:"webfont",key:i.toString()}),t(this,"fontNames"),t(this,"service"),t(this,"fontsLoadedCount"),this.fontNames=Array.isArray(i)?i:[i],this.service=n,this.fontsLoadedCount=0}load(){const e={fontactive:e=>{this.checkLoadedFonts(e)},fontinactive:e=>{this.checkLoadedFonts(e)}};switch(this.service){case"google":e[this.service]=this.getGoogleConfig();break;case"adobe-edge":e.typekit=this.getAdobeEdgeConfig();break;default:throw new Error("Unsupported font service")}y.load(e)}getGoogleConfig(){return{families:this.fontNames}}getAdobeEdgeConfig(){return{id:this.fontNames.join(";"),api:"//use.edgefonts.net"}}checkLoadedFonts(e){this.fontNames.indexOf(e)<0||(++this.fontsLoadedCount,this.fontsLoadedCount>=this.fontNames.length&&this.loader.nextFile(this,!0))}}class b extends i.Scene{constructor(){super("UIScene"),t(this,"level"),t(this,"labelWin"),t(this,"levelNumber",1),u.on("show-win",this.showWin,this),u.on("final-win",this.showWin,this)}init(){}preload(){this.load.addFile(new w(this.load,"Press Start 2P"))}create(e){const{width:t,height:i}=this.scale;e&&([this.levelNumber]=e,this.level=this.add.text(t/2,.1*i,`Level: ${this.levelNumber}`,{fontFamily:'"Press Start 2P"',fontSize:"3.5rem",strokeThickness:2,stroke:"#ffffff"}).setOrigin(.5).setScrollFactor(0),this.labelWin=this.add.text(t/2,i/2,"You win!",{fontFamily:'"Press Start 2P"',fontSize:"4rem",strokeThickness:0,stroke:"#ffffff"}).setOrigin(.5).setScrollFactor(0),this.labelWin.visible=!1,this.createButtons(t,i))}showWin(e,t){if(this.labelWin&&this.level){if(e.scene.pause(),this.level.visible=!1,this.labelWin.visible=!0,t)return this.labelWin.text="You\ncomplete\nall levels!",this.labelWin.setFontSize(0).setStroke("#ff471a",4).setAlign("center").setLineSpacing(15),void this.tweens.addCounter({from:0,to:1,duration:2500,onUpdate:e=>{var t;const i=e.getValue();null==(t=this.labelWin)||t.setFontSize(1+2*i+"rem")}});this.time.delayedCall(1500,(()=>{this.scene.start(e,[this.levelNumber])}))}}createButtons(e=0,t=0){Object.entries(c).forEach((([i,n])=>{this.add.sprite(e/2-128+n.x*s,t-118.4+n.y*s/1.25,"arrowButton").setScale(.7).setOrigin(.5).setInteractive(new Phaser.Geom.Rectangle(0,0,s,s),Phaser.Geom.Rectangle.Contains).setRotation(Phaser.Math.PI2/4*n.x+n.y*Phaser.Math.PI2/4*(n.y+1)).on("pointerdown",(()=>u.emit("touchArrow",i))).on("pointerup",(()=>u.emit("stopMovement")))})),this.add.sprite(e-128,t-118.4,"refreshButton").setScale(.7).setOrigin(.5).setInteractive().on("pointerdown",(()=>u.emit("restartLevel")))}}const x={type:Phaser.AUTO,width:540,height:960,parent:"game-container",backgroundColor:"#00cc66",scale:{mode:Phaser.Scale.FIT,autoCenter:Phaser.Scale.CENTER_BOTH},disableContextMenu:!0,autoMobilePipeline:!0,physics:{default:"arcade",arcade:{gravity:{x:0,y:0},debug:!0}},scene:[g,d,b]};new Phaser.Game(x);
